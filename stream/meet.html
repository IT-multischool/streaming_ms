<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MeetPro Advanced - Sala de Reuni√µes Premium</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #6c5f8d;
        --primary-dark: #4f46e5;
        --secondary: #06b6d4;
        --secondary-2: #ffc243;
        --accent: #f59e0b;
        --success: #10b981;
        --danger: #ef4444;
        --warning: #f59e0b;
        --dark-bg: #0e0f12;
        --panel-bg: #0e0f10;
        --card-bg: rgba(25, 25, 25, 0.8);
        --glass: rgba(20, 20, 20, 0.1);
        --text: #f8fafc;
        --text-muted: #94a3b8;
        --border: rgba(255, 255, 255, 0.1);
      }

      a {
        text-decoration: none;
      }
      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        background: linear-gradient(
          135deg,
          #0b1120 0%,
          #1e293b 50%,
          #0f172a 100%
        );
        color: var(--text);
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Animated Background */
.video-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: -1; /* tudo fica atr√°s do conte√∫do principal */
}

/* V√≠deo de fundo */
#bg-video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0; /* fica abaixo da overlay */
}

/* Overlay animada */
.animated-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    135deg,
    rgba(8, 8, 9, 0.7) 0%,
    rgba(22, 25, 28, 0.7) 50%,
    rgba(26, 29, 37, 0.7) 100%
  ); /* semi-transparente para o v√≠deo aparecer por baixo */
  z-index: 1;
  pointer-events: none; /* para n√£o bloquear cliques */
}

.animated-bg::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
      circle at 20% 80%,
      rgba(99, 102, 241, 0.1) 0%,
      transparent 50%
    ),
    radial-gradient(
      circle at 80% 20%,
      rgba(6, 182, 212, 0.1) 0%,
      transparent 50%
    );
  animation: float 20s ease-in-out infinite;
  z-index: 2; /* fica acima do overlay para efeito de part√≠culas */
}

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(1deg);
        }
      }

      /* Landing Page */
      .landing {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 20px;
      }

      .landing-card {
        background: var(--card-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 24px;
        padding: 40px;
        max-width: 500px;
        width: 100%;
        text-align: center;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.8s ease-out;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .logo {
        font-size: 2.5rem;
        font-weight: 800;
        background: linear-gradient(135deg, var(--primary), var(--secondary-2));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 10px;
      }

      .subtitle {
        color: var(--text-muted);
        font-size: 1.1rem;
        margin-bottom: 30px;
      }

      .form-group {
        margin-bottom: 20px;
        text-align: left;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: var(--text);
      }

      .form-input {
        width: 100%;
        padding: 15px 20px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border);
        border-radius: 12px;
        color: var(--text);
        font-size: 16px;
        transition: all 0.3s ease;
      }

      .form-input:focus {
        outline: none;
        border-color: var(--primary);
        background: rgba(255, 255, 255, 0.08);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
      }

      .form-input::placeholder {
        color: var(--text-muted);
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 15px 30px;
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        min-width: 120px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
      }

      .btn-secondary {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
      }

      .btn-secondary:hover {
        background: rgba(255, 255, 255, 0.15);
      }

      .btn-danger {
        background: linear-gradient(135deg, var(--danger), #dc2626);
      }

      .btn-success {
        background: linear-gradient(135deg, var(--success), #059669);
      }

      .btn-small {
        padding: 8px 16px;
        font-size: 14px;
        min-width: auto;
      }

      .actions-group {
        display: flex;
        gap: 15px;
        margin-top: 30px;
      }

      /* Meeting Interface */
      .meeting-app {
        display: none;
        height: 100vh;
        overflow: hidden;
      }

      .meeting-header {
        background: var(--card-bg);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--border);
        padding: 15px 25px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .meeting-info h1 {
        font-size: 1.2rem;
        font-weight: 700;
        margin-bottom: 4px;
      }

      .meeting-meta {
        color: var(--text-muted);
        font-size: 0.9rem;
        display: flex;
        gap: 20px;
      }

      .header-controls {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .meeting-container {
        display: grid;
        grid-template-columns: 1fr 380px;
        height: calc(100vh - 80px);
        gap: 0;
      }

      /* Video Area */
      .video-area {
        background: var(--dark-bg);
        padding: 20px;
        position: relative;
        overflow: hidden;
      }

      .video-grid {
        display: grid;
        gap: 15px;
        height: calc(100% - 80px);
      }

      .video-grid.grid-1 {
        grid-template-columns: 1fr;
      }

      .video-grid.grid-2 {
        grid-template-columns: 1fr 1fr;
      }

      .video-grid.grid-3,
      .video-grid.grid-4 {
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 1fr 1fr;
      }

      .video-grid.grid-many {
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(auto-fit, minmax(200px, 1fr));
      }

      .video-participant {
        position: relative;
        background: var(--panel-bg);
        border-radius: 16px;
        overflow: hidden;
        border: 2px solid transparent;
        transition: all 0.3s ease;
      }

      .video-participant.speaking {
        border-color: var(--success);
        box-shadow: 0 0 30px rgba(16, 185, 129, 0.3);
      }

      .video-participant.main-speaker {
        grid-column: span 2;
        grid-row: span 1;
      }

      .video-element {
        width: 100%;
        height: 100%;
        object-fit: cover;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        color: white;
      }

      .participant-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
        padding: 20px 15px 15px;
        color: white;
      }

      .participant-name {
        font-weight: 600;
        margin-bottom: 5px;
      }

      .participant-status {
        display: flex;
        gap: 8px;
      }

      .status-indicator {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 12px;
        padding: 2px 6px;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 12px;
      }

      .participant-controls {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        gap: 5px;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .video-participant:hover .participant-controls {
        opacity: 1;
      }

      .control-icon {
        background: rgba(0, 0, 0, 0.7);
        border: none;
        color: white;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        transition: all 0.3s ease;
      }

      .control-icon:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(1.1);
      }

      /* Controls Bar */
      .controls-bar {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(20px);
        padding: 15px 25px;
        border-radius: 50px;
        display: flex;
        gap: 12px;
        border: 1px solid var(--border);
      }

      .control-btn {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: white;
        width: 54px;
        height: 54px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        transition: all 0.3s ease;
        position: relative;
      }

      .control-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(1.1);
      }

      .control-btn.active {
        background: var(--success);
      }

      .control-btn.danger {
        background: var(--danger);
      }

      .control-btn.recording {
        background: var(--danger);
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
        }
      }

      /* Sidebar */
      .sidebar {
        background: var(--card-bg);
        backdrop-filter: blur(20px);
        border-left: 1px solid var(--border);
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .sidebar-tabs {
        display: flex;
        background: rgba(255, 255, 255, 0.05);
        border-bottom: 1px solid var(--border);
      }

      .tab {
        flex: 1;
        padding: 15px 10px;
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }

      .tab.active {
        color: var(--primary);
        background: rgba(99, 102, 241, 0.1);
        border-bottom: 2px solid var(--primary);
      }

      .sidebar-content {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
      }

      .section {
        margin-bottom: 30px;
      }

      .section-title {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 15px;
        color: var(--text);
      }

      /* Chat */
      .chat-messages {
        height: 300px;
        overflow-y: auto;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 15px;
      }

      .message {
        margin-bottom: 12px;
        padding: 10px 12px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.05);
        font-size: 14px;
      }

      .message.own {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        margin-left: 20px;
        color: white;
      }

      .message.system {
        background: rgba(245, 158, 11, 0.1);
        color: var(--warning);
        font-style: italic;
        text-align: center;
      }

      .message-sender {
        font-weight: 600;
        margin-bottom: 4px;
        font-size: 12px;
        opacity: 0.8;
      }

      .chat-input-area {
        display: flex;
        gap: 8px;
      }

      .chat-input {
        flex: 1;
        padding: 12px 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border);
        border-radius: 12px;
        color: var(--text);
        font-size: 14px;
      }

      .chat-input:focus {
        outline: none;
        border-color: var(--primary);
      }

      /* Participants */
      .participant-item {
        display: flex;
        align-items: center;
        padding: 12px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 12px;
        margin-bottom: 8px;
        gap: 12px;
      }

      .participant-avatar {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 16px;
      }

      .participant-info {
        flex: 1;
      }

      .participant-info-name {
        font-weight: 600;
        margin-bottom: 4px;
      }

      .participant-info-role {
        font-size: 12px;
        color: var(--text-muted);
      }

      .participant-status-icons {
        display: flex;
        gap: 4px;
      }

      .status-icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
      }

      .status-icon.mic-on {
        background: var(--success);
        color: white;
      }

      .status-icon.mic-off {
        background: var(--danger);
        color: white;
      }

      .status-icon.video-on {
        background: var(--primary);
        color: white;
      }

      .status-icon.video-off {
        background: var(--text-muted);
        color: white;
      }

      /* Reactions */
      .reactions-bar {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
      }

      .reaction-btn {
        padding: 8px 12px;
        background: rgba(255, 255, 255, 0.05);
        border: none;
        border-radius: 8px;
        font-size: 18px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .reaction-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: scale(1.1);
      }

      .reactions-overlay {
        position: fixed;
        top: 20px;
        right: 420px;
        z-index: 1000;
        pointer-events: none;
      }

      .floating-reaction {
        font-size: 32px;
        animation: floatReaction 3s ease-out forwards;
        margin-bottom: 10px;
      }

      @keyframes floatReaction {
        0% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(-100px) scale(1.5);
        }
      }

      /* Whiteboard */
      .whiteboard-container {
        background: white;
        border-radius: 12px;
        margin-bottom: 15px;
      }

      .whiteboard-tools {
        display: flex;
        gap: 8px;
        margin-bottom: 10px;
      }

      .tool-btn {
        padding: 8px 12px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border);
        border-radius: 8px;
        color: var(--text);
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s ease;
      }

      .tool-btn.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      #whiteboard {
        width: 100%;
        height: 200px;
        border-radius: 8px;
        cursor: crosshair;
      }

      /* File Sharing */
      .file-drop-zone {
        border: 2px dashed var(--border);
        border-radius: 12px;
        padding: 30px 20px;
        text-align: center;
        color: var(--text-muted);
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 15px;
      }

      .file-drop-zone:hover,
      .file-drop-zone.dragover {
        border-color: var(--primary);
        background: rgba(99, 102, 241, 0.05);
        color: var(--primary);
      }

      .shared-files {
        max-height: 200px;
        overflow-y: auto;
      }

      .file-item {
        display: flex;
        align-items: center;
        padding: 10px 12px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 8px;
        margin-bottom: 6px;
        gap: 10px;
        font-size: 14px;
      }

      .file-icon {
        font-size: 16px;
      }

      .file-info {
        flex: 1;
      }

      .file-name {
        font-weight: 500;
        margin-bottom: 2px;
      }

      .file-size {
        font-size: 12px;
        color: var(--text-muted);
      }

      /* AI Features */
      .ai-panel {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
      }

      .ai-status {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 10px;
        font-size: 14px;
      }

      .ai-pulse {
        width: 8px;
        height: 8px;
        background: #00ff88;
        border-radius: 50%;
        animation: pulse 1.5s infinite;
      }

      .transcript-area {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        padding: 15px;
        border-radius: 8px;
        max-height: 150px;
        overflow-y: auto;
        font-size: 13px;
        line-height: 1.4;
      }

      /* Polls */
      .poll-container {
        background: rgba(255, 255, 255, 0.03);
        padding: 15px;
        border-radius: 12px;
        margin-bottom: 15px;
      }

      .poll-question {
        font-weight: 600;
        margin-bottom: 15px;
      }

      .poll-option {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        margin: 6px 0;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .poll-option:hover {
        background: rgba(255, 255, 255, 0.08);
      }

      .poll-progress {
        flex: 1;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        overflow: hidden;
      }

      .poll-bar {
        height: 100%;
        background: var(--primary);
        transition: width 0.3s ease;
      }

      .poll-votes {
        font-size: 12px;
        color: var(--text-muted);
        min-width: 50px;
        text-align: right;
      }

      /* Notifications */
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--success);
        color: white;
        padding: 15px 20px;
        border-radius: 12px;
        z-index: 2000;
        animation: slideInRight 0.3s ease;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      }

      .notification.error {
        background: var(--danger);
      }

      .notification.warning {
        background: var(--warning);
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(100%);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* Screen Share Overlay */
      .screen-share-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 3000;
        display: none;
        align-items: center;
        justify-content: center;
      }

      .screen-share-content {
        width: 90%;
        height: 90%;
        background: var(--panel-bg);
        border-radius: 16px;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid var(--border);
      }

      .screen-share-placeholder {
        text-align: center;
        color: var(--text-muted);
      }

      .close-screen-share {
        position: absolute;
        top: 20px;
        right: 20px;
        background: var(--danger);
        color: white;
        border: none;
        padding: 12px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 18px;
        transition: all 0.3s ease;
      }

      .close-screen-share:hover {
        transform: scale(1.1);
      }

      /* Settings Modal */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(5px);
        z-index: 4000;
        display: none;
        align-items: center;
        justify-content: center;
      }

      .modal {
        background: var(--card-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-title {
        font-size: 1.4rem;
        font-weight: 700;
      }

      .modal-close {
        background: none;
        border: none;
        color: var(--text-muted);
        font-size: 24px;
        cursor: pointer;
        padding: 5px;
        border-radius: 50%;
        transition: all 0.3s ease;
      }

      .modal-close:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text);
      }

      /* Responsive */
      @media (max-width: 1024px) {
        .meeting-container {
          grid-template-columns: 1fr;
          grid-template-rows: 1fr auto;
        }

        .sidebar {
          height: 400px;
          border-left: none;
          border-top: 1px solid var(--border);
        }

        .reactions-overlay {
          right: 20px;
        }
      }

      @media (max-width: 768px) {
        .landing-card {
          padding: 30px 20px;
        }

        .actions-group {
          flex-direction: column;
        }

        .meeting-header {
          padding: 10px 15px;
        }

        .meeting-meta {
          flex-direction: column;
          gap: 5px;
        }

        .header-controls {
          flex-wrap: wrap;
        }

        .video-area {
          padding: 10px;
        }

        .video-grid {
          height: calc(100% - 100px);
        }

        .video-grid.grid-many {
          grid-template-columns: 1fr 1fr;
        }

        .controls-bar {
          padding: 12px 20px;
          gap: 8px;
        }

        .control-btn {
          width: 45px;
          height: 45px;
          font-size: 18px;
        }

        .sidebar-content {
          padding: 15px;
        }

        .chat-messages {
          height: 200px;
        }

        .modal {
          padding: 20px;
          margin: 20px;
        }
      }

      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div class="video-container">
      <video autoplay muted loop playsinline id="bg-video">
        <source src="videos/bg_meet.mp4" type="video/mp4" />
      </video>
      <div class="animated-bg"></div>
    </div>

    <!-- Landing Page -->
    <div id="landing" class="landing">
      <div class="landing-card">
        <a href="index.html"> <div class="logo">MS Meet</div></a>
        <p class="subtitle">Plataforma de reuni√µes com IA integrada</p>

        <!-- Create Room Form -->
        <div id="createForm">
          <div class="form-group">
            <label class="form-label">Nome da Reuni√£o</label>
            <input
              type="text"
              class="form-input"
              id="meetingName"
              placeholder="Ex: Reuni√£o de Equipa Semanal"
            />
          </div>

          <div class="form-group">
            <label class="form-label">O seu Nome</label>
            <input
              type="text"
              class="form-input"
              id="userName"
              placeholder="Digite seu nome"
            />
          </div>

          <div class="form-group">
            <label class="form-label">ID da Sala (opcional)</label>
            <input
              type="text"
              class="form-input"
              id="roomIdInput"
              placeholder="Deixe vazio para gerar automaticamente"
            />
          </div>

          <div class="actions-group">
            <button class="btn" onclick="createMeeting()">üöÄ Criar Sala</button>
            <button class="btn btn-secondary" onclick="showJoinForm()">
              üì± Entrar numa reuni√£o
            </button>
          </div>
        </div>

        <!-- Join Room Form -->
        <div id="joinForm" class="hidden">
          <div class="form-group">
            <label class="form-label">Seu Nome</label>
            <input
              type="text"
              class="form-input"
              id="joinUserName"
              placeholder="Digite seu nome"
            />
          </div>

          <div class="form-group">
            <label class="form-label">ID da Sala</label>
            <input
              type="text"
              class="form-input"
              id="joinRoomId"
              placeholder="Digite o ID da sala"
            />
          </div>

          <div class="actions-group">
            <button class="btn" onclick="joinMeeting()">
              üì± Entrar na Reuni√£o
            </button>
            <button class="btn btn-secondary" onclick="showCreateForm()">
              ‚Üê Voltar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Meeting Interface -->
    <div id="meetingApp" class="meeting-app">
      <!-- Header -->
      <header class="meeting-header">
        <div class="meeting-info">
          <h1 id="meetingTitle">Reuni√£o de Equipa</h1>
          <div class="meeting-meta">
            <span>Sala: <span id="currentRoomId">ABC123</span></span>
            <span>Dura√ß√£o: <span id="meetingDuration">00:00:00</span></span>
            <span>Participantes: <span id="participantCount">4</span></span>
          </div>
        </div>
        <div class="header-controls">
          <button
            class="btn btn-small btn-secondary"
            onclick="copyInviteLink()"
          >
            üìé Copiar Link
          </button>
          <button class="btn btn-small btn-secondary" onclick="showSettings()">
            ‚öôÔ∏è Defini√ß√µes
          </button>
          <button class="btn btn-small btn-danger" onclick="leaveMeeting()">
            üìû Sair
          </button>
        </div>
      </header>

      <div class="meeting-container">
        <!-- Video Area -->
        <div class="video-area">
          <div class="video-grid grid-4" id="videoGrid">
            <!-- Main Speaker -->
            <div
              class="video-participant main-speaker speaking"
              id="localParticipant"
            >
              <div class="video-element">JS</div>
              <div class="participant-overlay">
                <div class="participant-name">Jo√£o Silva (Voc√™)</div>
                <div class="participant-status">
                  <div class="status-indicator">üé§ Ativo</div>
                  <div class="status-indicator">üìπ C√¢mara</div>
                </div>
              </div>
              <div class="participant-controls">
                <button class="control-icon" title="Silenciar">üîá</button>
                <button class="control-icon" title="Desligar v√≠deo">üì∑</button>
                <button class="control-icon" title="Mais op√ß√µes">‚ãÆ</button>
              </div>
            </div>

            <!-- Remote Participants -->
            <div class="video-participant" id="participant1">
              <div class="video-element">MS</div>
              <div class="participant-overlay">
                <div class="participant-name">Maria Santos</div>
                <div class="participant-status">
                  <div class="status-indicator">üé§ Ativo</div>
                  <div class="status-indicator">üìπ C√¢mara</div>
                </div>
              </div>
              <div class="participant-controls">
                <button class="control-icon">üîá</button>
                <button class="control-icon">üì∑</button>
                <button class="control-icon">‚ãÆ</button>
              </div>
            </div>

            <div class="video-participant" id="participant2">
              <div class="video-element">PC</div>
              <div class="participant-overlay">
                <div class="participant-name">Pedro Costa</div>
                <div class="participant-status">
                  <div class="status-indicator">üîá Mudo</div>
                  <div class="status-indicator">üìπ C√¢mara</div>
                </div>
              </div>
              <div class="participant-controls">
                <button class="control-icon">üîá</button>
                <button class="control-icon">üì∑</button>
                <button class="control-icon">‚ãÆ</button>
              </div>
            </div>

            <div class="video-participant" id="participant3">
              <div class="video-element">AF</div>
              <div class="participant-overlay">
                <div class="participant-name">Ana Ferreira</div>
                <div class="participant-status">
                  <div class="status-indicator">üé§ Ativo</div>
                  <div class="status-indicator">üì∑ Desligada</div>
                </div>
              </div>
              <div class="participant-controls">
                <button class="control-icon">üîá</button>
                <button class="control-icon">üì∑</button>
                <button class="control-icon">‚ãÆ</button>
              </div>
            </div>
          </div>

          <!-- Controls Bar -->
          <div class="controls-bar">
            <button
              class="control-btn active"
              id="micBtn"
              onclick="toggleMic()"
              title="Microfone"
            >
              üé§
            </button>
            <button
              class="control-btn active"
              id="videoBtn"
              onclick="toggleVideo()"
              title="C√¢mara"
            >
              üìπ
            </button>
            <button
              class="control-btn"
              onclick="shareScreen()"
              title="Partilhar Ecr√£"
            >
              üñ•Ô∏è
            </button>
            <button
              class="control-btn"
              onclick="showReactions()"
              title="Rea√ß√µes"
            >
              üòä
            </button>
            <button
              class="control-btn"
              onclick="raiseHand()"
              title="Levantar M√£o"
            >
              ‚úã
            </button>
            <button
              class="control-btn"
              onclick="toggleRecording()"
              title="Gravar"
              id="recordBtn"
            >
              ‚è∫Ô∏è
            </button>
            <button
              class="control-btn"
              onclick="toggleSidebar()"
              title="Painel Lateral"
            >
              üìã
            </button>
            <button
              class="control-btn danger"
              onclick="leaveMeeting()"
              title="Sair"
            >
              üìû
            </button>
          </div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
          <!-- Sidebar Tabs -->
          <div class="sidebar-tabs">
            <button
              class="tab active"
              data-tab="chat"
              onclick="switchTab('chat')"
            >
              üí¨ Chat
            </button>
            <button
              class="tab"
              data-tab="participants"
              onclick="switchTab('participants')"
            >
              üë• Pessoas
            </button>
            <button
              class="tab"
              data-tab="features"
              onclick="switchTab('features')"
            >
              üöÄ Features
            </button>
            <button class="tab" data-tab="ai" onclick="switchTab('ai')">
              ü§ñ IA
            </button>
          </div>

          <!-- Sidebar Content -->
          <div class="sidebar-content">
            <!-- Chat Tab -->
            <div class="tab-content" id="chatTab">
              <div class="section">
                <div class="section-title">Chat da Reuni√£o</div>
                <div class="chat-messages" id="chatMessages">
                  <div class="message system">Reuni√£o iniciada √†s 14:30</div>
                  <div class="message">
                    <div class="message-sender">Maria Santos</div>
                    Bom dia pessoal! Prontos para come√ßar?
                  </div>
                  <div class="message">
                    <div class="message-sender">Pedro Costa</div>
                    Perfeito! Vamos ao primeiro t√≥pico da agenda.
                  </div>
                  <div class="message own">
                    <div class="message-sender">Voc√™</div>
                    Excelente! Estou pronto.
                  </div>
                </div>
                <div class="chat-input-area">
                  <input
                    type="text"
                    class="chat-input"
                    id="chatInput"
                    placeholder="Digite sua mensagem..."
                  />
                  <button class="btn btn-small" onclick="sendMessage()">
                    üì§
                  </button>
                </div>
              </div>

              <div class="section">
                <div class="section-title">Rea√ß√µes R√°pidas</div>
                <div class="reactions-bar">
                  <button class="reaction-btn" onclick="sendReaction('üëç')">
                    üëç
                  </button>
                  <button class="reaction-btn" onclick="sendReaction('üëè')">
                    üëè
                  </button>
                  <button class="reaction-btn" onclick="sendReaction('‚ù§Ô∏è')">
                    ‚ù§Ô∏è
                  </button>
                  <button class="reaction-btn" onclick="sendReaction('üòÇ')">
                    üòÇ
                  </button>
                  <button class="reaction-btn" onclick="sendReaction('ü§î')">
                    ü§î
                  </button>
                  <button class="reaction-btn" onclick="sendReaction('üéâ')">
                    üéâ
                  </button>
                </div>
                <button
                  class="btn btn-small btn-secondary"
                  onclick="raiseHand()"
                  style="margin-top: 10px"
                >
                  ‚úã Levantar M√£o
                </button>
              </div>
            </div>

            <!-- Participants Tab -->
            <div class="tab-content hidden" id="participantsTab">
              <div class="section">
                <div class="section-title">Participantes (4)</div>

                <div class="participant-item">
                  <div class="participant-avatar">JS</div>
                  <div class="participant-info">
                    <div class="participant-info-name">Jo√£o Silva (Voc√™)</div>
                    <div class="participant-info-role">Host</div>
                  </div>
                  <div class="participant-status-icons">
                    <div class="status-icon mic-on">üé§</div>
                    <div class="status-icon video-on">üìπ</div>
                  </div>
                </div>

                <div class="participant-item">
                  <div class="participant-avatar">MS</div>
                  <div class="participant-info">
                    <div class="participant-info-name">Maria Santos</div>
                    <div class="participant-info-role">Co-host</div>
                  </div>
                  <div class="participant-status-icons">
                    <div class="status-icon mic-on">üé§</div>
                    <div class="status-icon video-on">üìπ</div>
                  </div>
                </div>

                <div class="participant-item">
                  <div class="participant-avatar">PC</div>
                  <div class="participant-info">
                    <div class="participant-info-name">Pedro Costa</div>
                    <div class="participant-info-role">Participante</div>
                  </div>
                  <div class="participant-status-icons">
                    <div class="status-icon mic-off">üîá</div>
                    <div class="status-icon video-on">üìπ</div>
                  </div>
                </div>

                <div class="participant-item">
                  <div class="participant-avatar">AF</div>
                  <div class="participant-info">
                    <div class="participant-info-name">Ana Ferreira</div>
                    <div class="participant-info-role">Participante</div>
                  </div>
                  <div class="participant-status-icons">
                    <div class="status-icon mic-on">üé§</div>
                    <div class="status-icon video-off">üì∑</div>
                  </div>
                </div>
              </div>

              <div class="section">
                <div class="section-title">A√ß√µes de Modera√ß√£o</div>
                <button
                  class="btn btn-small btn-secondary"
                  style="margin-right: 10px; margin-bottom: 10px"
                >
                  üîá Silenciar Todos
                </button>
                <button
                  class="btn btn-small btn-secondary"
                  style="margin-bottom: 10px"
                >
                  üìπ Desligar V√≠deos
                </button>
                <button class="btn btn-small btn-secondary">
                  üè† Criar Sub-salas
                </button>
              </div>
            </div>

            <!-- Features Tab -->
            <div class="tab-content hidden" id="featuresTab">
              <div class="section">
                <div class="section-title">Quadro Branco</div>
                <div class="whiteboard-tools">
                  <button class="tool-btn active" data-tool="pen">
                    ‚úèÔ∏è Caneta
                  </button>
                  <button class="tool-btn" data-tool="eraser">
                    üßπ Borracha
                  </button>
                  <button class="tool-btn" onclick="clearWhiteboard()">
                    üóëÔ∏è Limpar
                  </button>
                </div>
                <div class="whiteboard-container">
                  <canvas id="whiteboard"></canvas>
                </div>
              </div>

              <div class="section">
                <div class="section-title">Partilha de Ficheiros</div>
                <div
                  class="file-drop-zone"
                  onclick="document.getElementById('fileInput').click()"
                >
                  <div style="margin-bottom: 10px">üìÅ</div>
                  <div>Clique ou arraste ficheiros aqui</div>
                  <input
                    type="file"
                    id="fileInput"
                    style="display: none"
                    multiple
                    onchange="handleFiles(this.files)"
                  />
                </div>
                <div class="shared-files" id="sharedFiles">
                  <div class="file-item">
                    <div class="file-icon">üìÑ</div>
                    <div class="file-info">
                      <div class="file-name">Apresentacao_Vendas.pdf</div>
                      <div class="file-size">2.4 MB</div>
                    </div>
                    <button class="btn btn-small">‚¨áÔ∏è</button>
                  </div>
                  <div class="file-item">
                    <div class="file-icon">üìä</div>
                    <div class="file-info">
                      <div class="file-name">Relatorio_Mensal.xlsx</div>
                      <div class="file-size">1.1 MB</div>
                    </div>
                    <button class="btn btn-small">‚¨áÔ∏è</button>
                  </div>
                </div>
              </div>

              <div class="section">
                <div class="section-title">Vota√ß√£o R√°pida</div>
                <div class="poll-container">
                  <div class="poll-question">
                    Aprovam a proposta apresentada?
                  </div>
                  <div class="poll-option" onclick="vote('sim')">
                    <input type="radio" name="poll" />
                    <span>‚úÖ Sim</span>
                    <div class="poll-progress">
                      <div class="poll-bar" style="width: 75%"></div>
                    </div>
                    <div class="poll-votes">3 votos</div>
                  </div>
                  <div class="poll-option" onclick="vote('nao')">
                    <input type="radio" name="poll" />
                    <span>‚ùå N√£o</span>
                    <div class="poll-progress">
                      <div class="poll-bar" style="width: 25%"></div>
                    </div>
                    <div class="poll-votes">1 voto</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- AI Tab -->
            <div class="tab-content hidden" id="aiTab">
              <div class="section">
                <div class="ai-panel">
                  <div class="ai-status">
                    <div class="ai-pulse"></div>
                    IA Ativa - Analisando reuni√£o
                  </div>
                  <div class="transcript-area" id="transcript">
                    <strong>Transcri√ß√£o em Tempo Real:</strong><br /><br />
                    <em>Jo√£o:</em> Bom dia pessoal, vamos come√ßar nossa reuni√£o
                    semanal...<br /><br />
                    <em>Maria:</em> Perfeito! Hoje temos tr√™s pontos principais
                    na agenda...<br /><br />
                    <em>Pedro:</em> Concordo. Podemos come√ßar pela an√°lise dos
                    resultados?
                  </div>
                </div>
              </div>

              <div class="section">
                <div class="section-title">üåç Tradu√ß√£o Simult√¢nea</div>
                <select class="form-input" style="margin-bottom: 15px">
                  <option>üáµüáπ Portugu√™s</option>
                  <option>üá∫üá∏ English</option>
                  <option>üá™üá∏ Espa√±ol</option>
                  <option>üá´üá∑ Fran√ßais</option>
                  <option>üá©üá™ Deutsch</option>
                  <option>üáÆüáπ Italiano</option>
                </select>
              </div>

              <div class="section">
                <div class="section-title">üìã Resumo Inteligente</div>
                <div
                  style="
                    background: rgba(255, 255, 255, 0.05);
                    padding: 15px;
                    border-radius: 8px;
                    font-size: 14px;
                    line-height: 1.5;
                  "
                >
                  <strong>Pontos Principais:</strong><br />
                  ‚Ä¢ Discuss√£o sobre metas do trimestre<br />
                  ‚Ä¢ Apresenta√ß√£o dos novos projetos<br />
                  ‚Ä¢ Defini√ß√£o de responsabilidades<br /><br />

                  <strong>Pr√≥ximos Passos:</strong><br />
                  ‚Ä¢ Enviar relat√≥rio at√© sexta-feira<br />
                  ‚Ä¢ Agendar reuni√£o com cliente<br />
                  ‚Ä¢ Revisar propostas de or√ßamento
                </div>
              </div>

              <div class="section">
                <div class="section-title">üéØ An√°lise de Participa√ß√£o</div>
                <div style="font-size: 14px">
                  <div
                    style="
                      display: flex;
                      justify-content: space-between;
                      margin-bottom: 8px;
                    "
                  >
                    <span>Jo√£o Silva</span>
                    <span>35%</span>
                  </div>
                  <div
                    style="
                      height: 4px;
                      background: rgba(255, 255, 255, 0.1);
                      border-radius: 2px;
                      margin-bottom: 12px;
                    "
                  >
                    <div
                      style="
                        height: 100%;
                        width: 35%;
                        background: var(--primary);
                        border-radius: 2px;
                      "
                    ></div>
                  </div>

                  <div
                    style="
                      display: flex;
                      justify-content: space-between;
                      margin-bottom: 8px;
                    "
                  >
                    <span>Maria Santos</span>
                    <span>28%</span>
                  </div>
                  <div
                    style="
                      height: 4px;
                      background: rgba(255, 255, 255, 0.1);
                      border-radius: 2px;
                      margin-bottom: 12px;
                    "
                  >
                    <div
                      style="
                        height: 100%;
                        width: 28%;
                        background: var(--secondary);
                        border-radius: 2px;
                      "
                    ></div>
                  </div>

                  <div
                    style="
                      display: flex;
                      justify-content: space-between;
                      margin-bottom: 8px;
                    "
                  >
                    <span>Pedro Costa</span>
                    <span>22%</span>
                  </div>
                  <div
                    style="
                      height: 4px;
                      background: rgba(255, 255, 255, 0.1);
                      border-radius: 2px;
                      margin-bottom: 12px;
                    "
                  >
                    <div
                      style="
                        height: 100%;
                        width: 22%;
                        background: var(--success);
                        border-radius: 2px;
                      "
                    ></div>
                  </div>

                  <div
                    style="
                      display: flex;
                      justify-content: space-between;
                      margin-bottom: 8px;
                    "
                  >
                    <span>Ana Ferreira</span>
                    <span>15%</span>
                  </div>
                  <div
                    style="
                      height: 4px;
                      background: rgba(255, 255, 255, 0.1);
                      border-radius: 2px;
                    "
                  >
                    <div
                      style="
                        height: 100%;
                        width: 15%;
                        background: var(--warning);
                        border-radius: 2px;
                      "
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <!-- Reactions Overlay -->
    <div class="reactions-overlay" id="reactionsOverlay"></div>

    <!-- Screen Share Overlay -->
    <div class="screen-share-overlay" id="screenShareOverlay">
      <div class="screen-share-content">
        <button class="close-screen-share" onclick="stopScreenShare()">
          ‚úï
        </button>
        <div class="screen-share-placeholder">
          <h3>üñ•Ô∏è Partilha de Ecr√£ Ativa</h3>
          <p>O seu ecr√£ est√° sendo partilhado com todos os participantes</p>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title">‚öôÔ∏è Defini√ß√µes da Reuni√£o</h3>
          <button class="modal-close" onclick="closeSettings()">‚úï</button>
        </div>

        <div class="section">
          <div class="section-title">üé• C√¢mara e √Åudio</div>
          <div class="form-group">
            <label class="form-label">C√¢mara</label>
            <select class="form-input">
              <option>C√¢mara Integrada</option>
              <option>C√¢mara USB Externa</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Microfone</label>
            <select class="form-input">
              <option>Microfone Padr√£o</option>
              <option>Headset Bluetooth</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Altifalantes</label>
            <select class="form-input">
              <option>Altifalantes do Sistema</option>
              <option>Headphones</option>
            </select>
          </div>
        </div>

        <div class="section">
          <div class="section-title">üîß Configura√ß√µes Avan√ßadas</div>
          <div class="form-group">
            <label class="form-label">Qualidade de V√≠deo</label>
            <select class="form-input">
              <option>HD (720p)</option>
              <option>Full HD (1080p)</option>
              <option>4K (2160p)</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Redu√ß√£o de Ru√≠do</label>
            <select class="form-input">
              <option>Autom√°tico</option>
              <option>Baixo</option>
              <option>Alto</option>
              <option>Desativado</option>
            </select>
          </div>
        </div>

        <div class="section">
          <div class="section-title">ü§ñ IA e Automa√ß√£o</div>
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 15px;
            "
          >
            <input type="checkbox" id="aiTranscription" checked />
            <label for="aiTranscription">Transcri√ß√£o autom√°tica</label>
          </div>
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 15px;
            "
          >
            <input type="checkbox" id="aiSummary" checked />
            <label for="aiSummary">Resumo inteligente</label>
          </div>
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 15px;
            "
          >
            <input type="checkbox" id="aiTranslation" />
            <label for="aiTranslation">Tradu√ß√£o simult√¢nea</label>
          </div>
        </div>

        <div
          style="
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 30px;
          "
        >
          <button class="btn btn-secondary" onclick="closeSettings()">
            Cancelar
          </button>
          <button class="btn" onclick="saveSettings()">Guardar</button>
        </div>
      </div>
    </div>

    <script>
      // Global State
      let currentUser = null;
      let currentRoom = null;
      let meetingStartTime = null;
      let micEnabled = true;
      let videoEnabled = true;
      let recording = false;
      let screenSharing = false;
      let sidebarVisible = true;
      let currentTab = "chat";

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        // Check URL parameters for auto-join
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get("room")) {
          document.getElementById("joinRoomId").value = urlParams.get("room");
          showJoinForm();
        }

        // Initialize whiteboard
        initWhiteboard();

        // Start simulations
        setTimeout(startSimulations, 2000);
      });

      // Landing Page Functions
      function showCreateForm() {
        document.getElementById("createForm").classList.remove("hidden");
        document.getElementById("joinForm").classList.add("hidden");
      }

      function showJoinForm() {
        document.getElementById("createForm").classList.add("hidden");
        document.getElementById("joinForm").classList.remove("hidden");
      }

      function createMeeting() {
        const meetingName = document.getElementById("meetingName").value.trim();
        const userName = document.getElementById("userName").value.trim();
        const roomId =
          document.getElementById("roomIdInput").value.trim() ||
          generateRoomId();

        if (!userName) {
          showNotification("Por favor, digite seu nome", "error");
          return;
        }

        currentUser = {
          name: userName,
          role: "host",
          id: "local",
        };

        currentRoom = {
          id: roomId,
          name: meetingName || "Nova Reuni√£o",
          createdAt: new Date(),
        };

        startMeeting();
      }

      function joinMeeting() {
        const userName = document.getElementById("joinUserName").value.trim();
        const roomId = document.getElementById("joinRoomId").value.trim();

        if (!userName || !roomId) {
          showNotification("Por favor, preencha todos os campos", "error");
          return;
        }

        currentUser = {
          name: userName,
          role: "participant",
          id: "local",
        };

        currentRoom = {
          id: roomId,
          name: "Reuni√£o",
          createdAt: new Date(),
        };

        startMeeting();
      }

      function startMeeting() {
        // Hide landing, show meeting
        document.getElementById("landing").style.display = "none";
        document.getElementById("meetingApp").style.display = "block";

        // Update meeting info
        document.getElementById("meetingTitle").textContent = currentRoom.name;
        document.getElementById("currentRoomId").textContent = currentRoom.id;

        // Start timer
        meetingStartTime = new Date();
        updateMeetingTimer();
        setInterval(updateMeetingTimer, 1000);

        // Show welcome message
        showNotification("Bem-vindo √† reuni√£o! üéâ", "success");

        // Add system message
        addChatMessage("system", `${currentUser.name} entrou na reuni√£o`);
      }

      function generateRoomId() {
        return Math.random().toString(36).substring(2, 8).toUpperCase();
      }

      // Meeting Functions
      function updateMeetingTimer() {
        if (!meetingStartTime) return;

        const now = new Date();
        const diff = now - meetingStartTime;
        const hours = Math.floor(diff / 3600000);
        const minutes = Math.floor((diff % 3600000) / 60000);
        const seconds = Math.floor((diff % 60000) / 1000);

        document.getElementById("meetingDuration").textContent = `${hours
          .toString()
          .padStart(2, "0")}:${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;
      }

      function toggleMic() {
        micEnabled = !micEnabled;
        const btn = document.getElementById("micBtn");
        btn.textContent = micEnabled ? "üé§" : "üîá";
        btn.classList.toggle("active", micEnabled);

        // Update participant status
        updateParticipantStatus("local", "video", videoEnabled);
        showNotification(videoEnabled ? "C√¢mara ativada" : "C√¢mara desativada");
      }

      function shareScreen() {
        if (!screenSharing) {
          document.getElementById("screenShareOverlay").style.display = "flex";
          screenSharing = true;
          showNotification("Partilha de ecr√£ iniciada");
        }
      }

      function stopScreenShare() {
        document.getElementById("screenShareOverlay").style.display = "none";
        screenSharing = false;
        showNotification("Partilha de ecr√£ terminada");
      }

      function toggleRecording() {
        recording = !recording;
        const btn = document.getElementById("recordBtn");
        btn.textContent = recording ? "‚èπÔ∏è" : "‚è∫Ô∏è";
        btn.classList.toggle("recording", recording);
        showNotification(
          recording ? "Grava√ß√£o iniciada" : "Grava√ß√£o terminada"
        );
      }

      function raiseHand() {
        showNotification("M√£o levantada!");
        addReaction("‚úã");
        addChatMessage("system", `${currentUser.name} levantou a m√£o`);
      }

      function leaveMeeting() {
        if (confirm("Tem certeza que deseja sair da reuni√£o?")) {
          // Reset to landing page
          document.getElementById("meetingApp").style.display = "none";
          document.getElementById("landing").style.display = "flex";

          // Reset forms
          document.getElementById("createForm").classList.remove("hidden");
          document.getElementById("joinForm").classList.add("hidden");

          // Clear data
          currentUser = null;
          currentRoom = null;
          meetingStartTime = null;

          showNotification("Voc√™ saiu da reuni√£o", "warning");
        }
      }

      // Sidebar Functions
      function toggleSidebar() {
        sidebarVisible = !sidebarVisible;
        const sidebar = document.getElementById("sidebar");
        const container = document.querySelector(".meeting-container");

        if (sidebarVisible) {
          sidebar.style.display = "flex";
          container.style.gridTemplateColumns = "1fr 380px";
        } else {
          sidebar.style.display = "none";
          container.style.gridTemplateColumns = "1fr";
        }
      }

      function switchTab(tabName) {
        // Remove active class from all tabs
        document
          .querySelectorAll(".tab")
          .forEach((tab) => tab.classList.remove("active"));
        document
          .querySelectorAll(".tab-content")
          .forEach((content) => content.classList.add("hidden"));

        // Add active class to selected tab
        document
          .querySelector(`[data-tab="${tabName}"]`)
          .classList.add("active");
        document.getElementById(`${tabName}Tab`).classList.remove("hidden");

        currentTab = tabName;
      }

      // Chat Functions
      function sendMessage() {
        const input = document.getElementById("chatInput");
        const message = input.value.trim();

        if (message) {
          addChatMessage("own", message, currentUser.name);
          input.value = "";

          // Simulate response (in real app, this would be WebRTC/WebSocket)
          setTimeout(() => {
            const responses = [
              "Concordo!",
              "Boa ideia!",
              "Vamos discutir isso.",
              "Perfeito!",
              "Interessante perspectiva.",
            ];
            const randomResponse =
              responses[Math.floor(Math.random() * responses.length)];
            const participants = [
              "Maria Santos",
              "Pedro Costa",
              "Ana Ferreira",
            ];
            const randomParticipant =
              participants[Math.floor(Math.random() * participants.length)];

            addChatMessage("", randomResponse, randomParticipant);
          }, Math.random() * 3000 + 1000);
        }
      }

      function addChatMessage(type, message, sender = "Sistema") {
        const messagesContainer = document.getElementById("chatMessages");
        const messageEl = document.createElement("div");

        if (type === "system") {
          messageEl.className = "message system";
          messageEl.textContent = message;
        } else {
          messageEl.className = `message ${type}`;
          messageEl.innerHTML = `
                    <div class="message-sender">${sender}</div>
                    ${message}
                `;
        }

        messagesContainer.appendChild(messageEl);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      }

      // Enter key to send message
      document.addEventListener("keypress", function (e) {
        if (e.key === "Enter" && e.target.id === "chatInput") {
          sendMessage();
        }
      });

      // Reactions Functions
      function sendReaction(emoji) {
        addReaction(emoji);
        addChatMessage("system", `${currentUser.name} reagiu ${emoji}`);
      }

      function addReaction(emoji) {
        const overlay = document.getElementById("reactionsOverlay");
        const reactionEl = document.createElement("div");
        reactionEl.className = "floating-reaction";
        reactionEl.textContent = emoji;
        overlay.appendChild(reactionEl);

        setTimeout(() => {
          reactionEl.remove();
        }, 3000);
      }

      function showReactions() {
        const reactions = ["üëç", "üëè", "‚ù§Ô∏è", "üòÇ", "ü§î", "üéâ"];
        const randomReaction =
          reactions[Math.floor(Math.random() * reactions.length)];
        sendReaction(randomReaction);
      }

      // File Functions
      function handleFiles(files) {
        const container = document.getElementById("sharedFiles");

        Array.from(files).forEach((file) => {
          const fileEl = document.createElement("div");
          fileEl.className = "file-item";
          fileEl.innerHTML = `
                    <div class="file-icon">${getFileIcon(file.name)}</div>
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${formatFileSize(
                          file.size
                        )}</div>
                    </div>
                    <button class="btn btn-small" onclick="downloadFile('${
                      file.name
                    }')">‚¨áÔ∏è</button>
                `;
          container.insertBefore(fileEl, container.firstChild);
        });

        showNotification(`${files.length} ficheiro(s) partilhado(s)`);
        addChatMessage(
          "system",
          `${currentUser.name} partilhou ${files.length} ficheiro(s)`
        );
      }

      function getFileIcon(filename) {
        const ext = filename.split(".").pop().toLowerCase();
        const icons = {
          pdf: "üìÑ",
          doc: "üìù",
          docx: "üìù",
          xls: "üìä",
          xlsx: "üìä",
          ppt: "üìà",
          pptx: "üìà",
          jpg: "üñºÔ∏è",
          jpeg: "üñºÔ∏è",
          png: "üñºÔ∏è",
          gif: "üñºÔ∏è",
          mp4: "üé•",
          avi: "üé•",
          mov: "üé•",
          mp3: "üéµ",
          wav: "üéµ",
          zip: "üì¶",
          rar: "üì¶",
        };
        return icons[ext] || "üìÑ";
      }

      function formatFileSize(bytes) {
        if (bytes === 0) return "0 Bytes";
        const k = 1024;
        const sizes = ["Bytes", "KB", "MB", "GB"];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + " " + sizes[i];
      }

      function downloadFile(filename) {
        showNotification(`A descarregar ${filename}...`);
      }

      // Drag and Drop for files
      const dropZone = document.querySelector(".file-drop-zone");
      if (dropZone) {
        dropZone.addEventListener("dragover", (e) => {
          e.preventDefault();
          dropZone.classList.add("dragover");
        });

        dropZone.addEventListener("dragleave", () => {
          dropZone.classList.remove("dragover");
        });

        dropZone.addEventListener("drop", (e) => {
          e.preventDefault();
          dropZone.classList.remove("dragover");
          handleFiles(e.dataTransfer.files);
        });
      }

      // Whiteboard Functions
      function initWhiteboard() {
        const canvas = document.getElementById("whiteboard");
        if (!canvas) return;

        const ctx = canvas.getContext("2d");
        let drawing = false;
        let currentTool = "pen";

        // Set canvas size
        function resizeCanvas() {
          const rect = canvas.getBoundingClientRect();
          canvas.width = rect.width * devicePixelRatio;
          canvas.height = rect.height * devicePixelRatio;
          ctx.scale(devicePixelRatio, devicePixelRatio);
          ctx.lineWidth = 2;
          ctx.lineCap = "round";
          ctx.strokeStyle = "#333";
        }

        resizeCanvas();
        window.addEventListener("resize", resizeCanvas);

        function startDrawing(e) {
          drawing = true;
          const rect = canvas.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          ctx.beginPath();
          ctx.moveTo(x, y);
        }

        function draw(e) {
          if (!drawing) return;

          const rect = canvas.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;

          if (currentTool === "eraser") {
            ctx.globalCompositeOperation = "destination-out";
            ctx.lineWidth = 20;
          } else {
            ctx.globalCompositeOperation = "source-over";
            ctx.lineWidth = 2;
            ctx.strokeStyle = "#333";
          }

          ctx.lineTo(x, y);
          ctx.stroke();
        }

        function stopDrawing() {
          drawing = false;
          ctx.beginPath();
        }

        // Mouse events
        canvas.addEventListener("mousedown", startDrawing);
        canvas.addEventListener("mousemove", draw);
        canvas.addEventListener("mouseup", stopDrawing);
        canvas.addEventListener("mouseout", stopDrawing);

        // Touch events for mobile
        canvas.addEventListener("touchstart", (e) => {
          e.preventDefault();
          const touch = e.touches[0];
          const mouseEvent = new MouseEvent("mousedown", {
            clientX: touch.clientX,
            clientY: touch.clientY,
          });
          canvas.dispatchEvent(mouseEvent);
        });

        canvas.addEventListener("touchmove", (e) => {
          e.preventDefault();
          const touch = e.touches[0];
          const mouseEvent = new MouseEvent("mousemove", {
            clientX: touch.clientX,
            clientY: touch.clientY,
          });
          canvas.dispatchEvent(mouseEvent);
        });

        canvas.addEventListener("touchend", (e) => {
          e.preventDefault();
          const mouseEvent = new MouseEvent("mouseup", {});
          canvas.dispatchEvent(mouseEvent);
        });

        // Tool selection
        document.querySelectorAll(".tool-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            document
              .querySelectorAll(".tool-btn")
              .forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            currentTool = btn.dataset.tool;
          });
        });
      }

      function clearWhiteboard() {
        const canvas = document.getElementById("whiteboard");
        const ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        showNotification("Quadro limpo");
      }

      // Poll Functions
      function vote(option) {
        showNotification(`Voto registado: ${option}`);
        addChatMessage("system", `${currentUser.name} votou: ${option}`);
      }

      // Settings Functions
      function showSettings() {
        document.getElementById("settingsModal").style.display = "flex";
      }

      function closeSettings() {
        document.getElementById("settingsModal").style.display = "none";
      }

      function saveSettings() {
        showNotification("Defini√ß√µes guardadas com sucesso!", "success");
        closeSettings();
      }

      // Utility Functions
      function copyInviteLink() {
        const link = `${window.location.origin}${window.location.pathname}?room=${currentRoom.id}`;

        if (navigator.clipboard) {
          navigator.clipboard.writeText(link).then(() => {
            showNotification(
              "Link copiado para a √°rea de transfer√™ncia!",
              "success"
            );
          });
        } else {
          // Fallback for older browsers
          const textArea = document.createElement("textarea");
          textArea.value = link;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand("copy");
          document.body.removeChild(textArea);
          showNotification("Link copiado!", "success");
        }
      }

      function updateParticipantStatus(participantId, type, enabled) {
        // Update visual indicators in participant list and video grid
        // This would normally sync with other participants via WebRTC
      }

      function showNotification(message, type = "success") {
        const notification = document.createElement("div");
        notification.className = `notification ${type}`;
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
          notification.remove();
        }, 3000);
      }

      // Simulations for Demo
      function startSimulations() {
        // Simulate speaking indicators
        setInterval(() => {
          const participants = document.querySelectorAll(".video-participant");
          participants.forEach((p) => p.classList.remove("speaking"));

          if (Math.random() > 0.7) {
            const randomParticipant =
              participants[Math.floor(Math.random() * participants.length)];
            randomParticipant.classList.add("speaking");
          }
        }, 3000);

        // Simulate random messages
        setInterval(() => {
          if (Math.random() > 0.95) {
            const messages = [
              "Excelente apresenta√ß√£o!",
              "Tenho uma pergunta sobre isso.",
              "Podemos agendar um follow-up?",
              "Concordo completamente.",
              "Muito interessante!",
              "Vamos para o pr√≥ximo t√≥pico?",
            ];
            const participants = [
              "Maria Santos",
              "Pedro Costa",
              "Ana Ferreira",
            ];
            const randomMessage =
              messages[Math.floor(Math.random() * messages.length)];
            const randomParticipant =
              participants[Math.floor(Math.random() * participants.length)];

            addChatMessage("", randomMessage, randomParticipant);
          }
        }, 8000);

        // Simulate AI transcript updates
        setInterval(() => {
          if (Math.random() > 0.8) {
            const transcript = document.getElementById("transcript");
            const speakers = ["Jo√£o", "Maria", "Pedro", "Ana"];
            const phrases = [
              "apresenta os resultados do √∫ltimo trimestre",
              "concorda com a proposta apresentada",
              "sugere uma reuni√£o de follow-up",
              "partilha feedback sobre o projeto",
              "explica os pr√≥ximos passos",
              "faz uma pergunta sobre o cronograma",
            ];

            const speaker =
              speakers[Math.floor(Math.random() * speakers.length)];
            const phrase = phrases[Math.floor(Math.random() * phrases.length)];

            transcript.innerHTML += `<br><em>${speaker}:</em> ${phrase}...`;
            transcript.scrollTop = transcript.scrollHeight;
          }
        }, 6000);

        // Simulate random reactions
        setInterval(() => {
          if (Math.random() > 0.98) {
            const reactions = ["üëç", "üëè", "‚ù§Ô∏è", "üòä", "üéâ"];
            const randomReaction =
              reactions[Math.floor(Math.random() * reactions.length)];
            addReaction(randomReaction);
          }
        }, 5000);
      }

      // Keyboard Shortcuts
      document.addEventListener("keydown", function (e) {
        // Only process shortcuts when not typing in input fields
        if (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA")
          return;

        if (e.altKey) {
          switch (e.key.toLowerCase()) {
            case "m":
              e.preventDefault();
              toggleMic();
              break;
            case "v":
              e.preventDefault();
              toggleVideo();
              break;
            case "s":
              e.preventDefault();
              shareScreen();
              break;
            case "r":
              e.preventDefault();
              toggleRecording();
              break;
            case "h":
              e.preventDefault();
              raiseHand();
              break;
            case "c":
              e.preventDefault();
              switchTab("chat");
              break;
            case "p":
              e.preventDefault();
              switchTab("participants");
              break;
          }
        }

        if (e.key === "Escape") {
          if (screenSharing) {
            stopScreenShare();
          }
          if (
            document.getElementById("settingsModal").style.display === "flex"
          ) {
            closeSettings();
          }
        }
      });

      // Close modals when clicking outside
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("modal-overlay")) {
          if (e.target.id === "settingsModal") {
            closeSettings();
          }
        }
      });

      // Responsive video grid adjustment
      function adjustVideoGrid() {
        const videoGrid = document.getElementById("videoGrid");
        const participants = document.querySelectorAll(".video-participant");
        const count = participants.length;

        videoGrid.className = "video-grid";

        if (count === 1) {
          videoGrid.classList.add("grid-1");
        } else if (count === 2) {
          videoGrid.classList.add("grid-2");
        } else if (count <= 4) {
          videoGrid.classList.add("grid-4");
        } else {
          videoGrid.classList.add("grid-many");
        }
      }

      // Initialize responsive grid
      window.addEventListener("resize", adjustVideoGrid);
      setTimeout(adjustVideoGrid, 100);

      // Prevent zoom on double tap (mobile)
      let lastTouchEnd = 0;
      document.addEventListener(
        "touchend",
        function (event) {
          const now = new Date().getTime();
          if (now - lastTouchEnd <= 300) {
            event.preventDefault();
          }
          lastTouchEnd = now;
        },
        false
      );

      // Advanced Features
      function createBreakoutRoom() {
        showNotification("Sub-sala criada com sucesso!");
        addChatMessage("system", "Uma nova sub-sala foi criada");
      }

      function muteAllParticipants() {
        showNotification("Todos os participantes foram silenciados");
        addChatMessage("system", "O host silenciou todos os participantes");
      }

      function disableAllVideos() {
        showNotification("V√≠deos de todos os participantes foram desligados");
        addChatMessage("system", "O host desligou todos os v√≠deos");
      }

      // WebRTC Simulation (placeholder for real implementation)
      function simulateWebRTC() {
        // This is where you would implement actual WebRTC functionality
        // Including peer connections, data channels, media streams, etc.
        console.log(
          "WebRTC simulation - in production, implement actual peer connections"
        );
      }

      // Voice Recognition (Speech API)
      let recognition = null;
      function startVoiceRecognition() {
        if (
          "webkitSpeechRecognition" in window ||
          "SpeechRecognition" in window
        ) {
          const SpeechRecognition =
            window.SpeechRecognition || window.webkitSpeechRecognition;
          recognition = new SpeechRecognition();
          recognition.continuous = true;
          recognition.interimResults = true;
          recognition.lang = "pt-PT";

          recognition.onresult = function (event) {
            let finalTranscript = "";
            for (let i = event.resultIndex; i < event.results.length; i++) {
              if (event.results[i].isFinal) {
                finalTranscript += event.results[i][0].transcript;
              }
            }
            if (finalTranscript) {
              updateTranscript(finalTranscript);
            }
          };

          recognition.onerror = function (event) {
            console.error("Speech recognition error:", event.error);
          };

          recognition.start();
          showNotification("Reconhecimento de voz ativado");
        } else {
          showNotification(
            "Reconhecimento de voz n√£o suportado neste browser",
            "error"
          );
        }
      }

      function stopVoiceRecognition() {
        if (recognition) {
          recognition.stop();
          recognition = null;
          showNotification("Reconhecimento de voz desativado");
        }
      }

      function updateTranscript(text) {
        const transcript = document.getElementById("transcript");
        const currentTime = new Date().toLocaleTimeString();
        transcript.innerHTML += `<br><strong>${currentTime}</strong> - ${currentUser.name}: ${text}`;
        transcript.scrollTop = transcript.scrollHeight;
      }

      // Picture-in-Picture Support
      function togglePictureInPicture() {
        const video = document.querySelector(
          "#localParticipant .video-element"
        );
        if (video && document.pictureInPictureElement) {
          document.exitPictureInPicture();
        } else if (video && document.pictureInPictureEnabled) {
          video.requestPictureInPicture();
        }
      }

      // Fullscreen API
      function toggleFullscreen() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen();
          showNotification("Modo ecr√£ inteiro ativado");
        } else {
          document.exitFullscreen();
          showNotification("Modo ecr√£ inteiro desativado");
        }
      }

      // Export Meeting Data
      function exportMeetingData() {
        const meetingData = {
          room: currentRoom,
          user: currentUser,
          startTime: meetingStartTime,
          duration: document.getElementById("meetingDuration").textContent,
          messages: Array.from(
            document.querySelectorAll("#chatMessages .message")
          ).map((msg) => ({
            sender:
              msg.querySelector(".message-sender")?.textContent || "System",
            content: msg.textContent,
            timestamp: new Date().toISOString(),
          })),
        };

        const dataStr = JSON.stringify(meetingData, null, 2);
        const dataBlob = new Blob([dataStr], { type: "application/json" });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement("a");
        link.href = url;
        link.download = `reuniao_${currentRoom.id}_${
          new Date().toISOString().split("T")[0]
        }.json`;
        link.click();
        URL.revokeObjectURL(url);

        showNotification("Dados da reuni√£o exportados");
      }

      // Network Quality Indicator
      function updateNetworkQuality() {
        // Simulate network quality check
        const qualities = ["excellent", "good", "fair", "poor"];
        const quality = qualities[Math.floor(Math.random() * qualities.length)];

        // This would be replaced with actual network quality metrics
        const indicator = document.createElement("div");
        indicator.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: ${
                  quality === "excellent"
                    ? "#10b981"
                    : quality === "good"
                    ? "#f59e0b"
                    : "#ef4444"
                };
                color: white;
                padding: 8px 12px;
                border-radius: 20px;
                font-size: 12px;
                z-index: 1000;
            `;
        indicator.textContent = `Rede: ${quality}`;
        document.body.appendChild(indicator);

        setTimeout(() => indicator.remove(), 5000);
      }

      // Auto-save settings
      function autoSaveSettings() {
        const settings = {
          micEnabled,
          videoEnabled,
          userName: currentUser?.name,
          lastRoomId: currentRoom?.id,
        };

        // In a real application, you would save to localStorage or server
        // For this demo, we'll just show a notification
        if (currentUser) {
          showNotification(
            "Configura√ß√µes guardadas automaticamente",
            "success"
          );
        }
      }

      // Periodic auto-save
      setInterval(autoSaveSettings, 30000); // Save every 30 seconds

      // Connection status monitoring
      function monitorConnection() {
        const updateStatus = () => {
          const status = navigator.onLine ? "Conectado" : "Desconectado";
          const statusEl = document.querySelector(
            ".meeting-meta span:first-child"
          );
          if (statusEl && currentRoom) {
            statusEl.innerHTML = `Sala: ${currentRoom.id} | Status: ${status}`;
          }
        };

        window.addEventListener("online", () => {
          updateStatus();
          showNotification("Conex√£o reestabelecida", "success");
        });

        window.addEventListener("offline", () => {
          updateStatus();
          showNotification("Conex√£o perdida", "error");
        });

        updateStatus();
      }

      // Initialize connection monitoring when meeting starts
      function initializeMeetingFeatures() {
        monitorConnection();
        updateNetworkQuality();

        // Update network quality periodically
        setInterval(updateNetworkQuality, 60000); // Every minute
      }

      // Enhanced error handling
      window.addEventListener("error", function (event) {
        console.error("Error occurred:", event.error);
        showNotification(
          "Ocorreu um erro. Verifique a consola para detalhes.",
          "error"
        );
      });

      // Service Worker registration (for PWA functionality)
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          // In production, register a service worker here
          console.log("Service Worker support detected");
        });
      }

      // Performance monitoring
      function logPerformanceMetrics() {
        if (performance && performance.timing) {
          const timing = performance.timing;
          const loadTime = timing.loadEventEnd - timing.navigationStart;
          console.log(`Page load time: ${loadTime}ms`);
        }
      }

      // Initialize performance logging
      window.addEventListener("load", logPerformanceMetrics);

      // Accessibility improvements
      function improveAccessibility() {
        // Add ARIA labels to buttons
        document.querySelectorAll("button").forEach((btn) => {
          if (!btn.getAttribute("aria-label") && btn.title) {
            btn.setAttribute("aria-label", btn.title);
          }
        });

        // Add keyboard navigation
        document.addEventListener("keydown", function (e) {
          if (e.key === "Tab") {
            document.body.classList.add("keyboard-navigation");
          }
        });

        document.addEventListener("mousedown", function () {
          document.body.classList.remove("keyboard-navigation");
        });
      }

      // Initialize accessibility features
      document.addEventListener("DOMContentLoaded", improveAccessibility);

      // Virtual background support (placeholder)
      function enableVirtualBackground() {
        showNotification("Fundo virtual ativado (demo)", "success");
        // In production, implement actual background replacement using ML
      }

      // Meeting analytics
      const meetingAnalytics = {
        startTime: null,
        messagesSent: 0,
        reactionsUsed: 0,
        handsRaised: 0,

        trackEvent(event, data = {}) {
          console.log(`Analytics: ${event}`, data);
          // In production, send to analytics service
        },
      };

      // Override existing functions to include analytics
      const originalSendMessage = sendMessage;
      sendMessage = function () {
        originalSendMessage();
        meetingAnalytics.messagesSent++;
        meetingAnalytics.trackEvent("message_sent");
      };

      const originalSendReaction = sendReaction;
      sendReaction = function (emoji) {
        originalSendReaction(emoji);
        meetingAnalytics.reactionsUsed++;
        meetingAnalytics.trackEvent("reaction_sent", { emoji });
      };

      const originalRaiseHand = raiseHand;
      raiseHand = function () {
        originalRaiseHand();
        meetingAnalytics.handsRaised++;
        meetingAnalytics.trackEvent("hand_raised");
      };

      // Final initialization
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize meeting features when DOM is ready
        setTimeout(() => {
          if (currentRoom) {
            initializeMeetingFeatures();
          }
        }, 1000);
      });

      // Cleanup function for when user leaves
      window.addEventListener("beforeunload", function (e) {
        if (currentRoom) {
          // Cleanup WebRTC connections, stop media streams, etc.
          if (recognition) {
            stopVoiceRecognition();
          }

          // Save final analytics
          meetingAnalytics.trackEvent("meeting_ended", {
            duration: document.getElementById("meetingDuration")?.textContent,
            messagesSent: meetingAnalytics.messagesSent,
            reactionsUsed: meetingAnalytics.reactionsUsed,
            handsRaised: meetingAnalytics.handsRaised,
          });
        }
      });
    </script>
  </body>
</html>
<!-- local', 'mic', micEnabled); showNotification(micEnabled ? 'Microfone ativado' :
'Microfone desativado'); } function toggleVideo() { videoEnabled =
!videoEnabled; const btn = document.getElementById('videoBtn'); btn.textContent
= videoEnabled ? 'üìπ' : 'üì∑'; btn.classList.toggle('active', videoEnabled); //
Update participant status updateParticipantStatus(' -->
